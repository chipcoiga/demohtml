２.サーバ構成・スペック／クライアント要件
利用ユーザ数200名、同時接続50名というご要件となりますで、以下台数で構成と致します。尚、本番運用環境と別にテスト環境も必要となります。
DBサーバスキーマ分けにより、本番運用用、テスト環境を切り分ける前提と致します。
本番環境eb/APサーバ	×1 本番、テスト兼用DBサーバ	×1 テスト用eb/APサーバ	×1
 
※ テスト環境、システム更新時評価用環境を想定しております。
※ 上記に冗長構成含んでおりません。
※ バックアップ運用御見積含んでおりません。
※ 冗長構成、バックアップ運用に関して御社にてご検討頂けれ幸いです。
※ 御社と協議結果、初期運用EB/APサーバ1台構成で対応することと致します。
 
以下、開発想定機能となります。
3-1 .対応機能概要
 
自動制御装置および工事費選定、ブラウザ画面でも現状Excel入力と同等操作性をご提供可能と判断しております。また
、選定結果を編集する機能をブラウザ画面に対しても開発を行う必要があり、コスト面でもブラウザ画面に集約したほうが、メリットがあります。
監視装置選定、制御盤・リモート盤選定、同機能をブラウザ画面に実装した場合、操作性、コスト面でデメリットが大きいと判断し、
現状Excel入力を拡張する方向で対応と致します。従いまして、以下操作切り分けで御見積となります。
自動制御装置機器選定、工事費選定 ・・・　ブラウザ画面入力監視装置選定、制御盤・リモート盤選定 ・・・　Excel入力尚、自動制御装置機器選定、
工事費選定に関して、Excelに近い操作感を含む以下仕様で実装致します。
・ 単一、複数行コピー、切り取り、貼り付け、行削除但し、複数行操作、対象行をチェックボックスで選択頂く操作となります。
・ セルに対する項目入力、セルに対する項目コピー、切り取り、貼り付け、削除
・ 各列幅変更（但し、ブラウザを再起動した場合に初期幅に戻ります）・ 右クリックメニューによる、行挿入、削除
・ 行に対するキー項目（品番など）検索、途中入力文字に対するオートコンプリート
・ 行に対するキー項目（品番など）に対する付随情報（品名など）自動記入
※ Excel操作うち、以下操作ブラウザで再現できない操作となります。
・ カーソルキーを利用してセル移動
・ Ctrl また hift キーを利用して複数行選択
・ 列削除、表示列入れ替え
・ フィルター機能
・ ソート（Excelような高機能実現できません）
・ ショートカットキー利用
・ 入力画面印刷
・ セル色付け、文字フォント、サイズ変更
・ 行単位入れ替え操作（入れ替えボタンを作成しボタンにて操作）
Excel操作そもをブラウザ上で表現すること不可能となりますで上記以外機能に関してもブラウザ上で再現できない操作が発生する可能性があります。
そ場合、『対応不可』 『今回スケジュール、費用で対応が不可』という対応になりますで上記内容について、十分に精査して頂き、
不明な操作があれ事前にお知らせ頂くようお願い致します。
※ 画面遷移に関して、暫定となります。別途、要件定義フェーズにて精査致します。
1)	ログイン
ユーザマスタを新積算システム内で作成します。
ユーザマスタに、ユーザ氏名、権限、所属等、本システムに必要な情報を管理致します。以下手順で認証処理を行います。
1)	新積算システムユーザマスタと入力ID突合せを行う。
2)	1) で突合せに成功した場合、LDAPサーバに接続し、入力IDとパスワード突合せをLDAPサーバに対して行う。 3) 上記認証に成功した場合、
各種ユーザ情報を取得し、以降操作を可能にする。ログイン認証時に得られたユーザ所属情報を用い、金額計算単価、歩掛変更を行います。
2)	メニュー
各種機能へ遷移を行う、メニューを作成します。
管理者機能等、特定権限を持ったユーザみ利用可能な機能メニュー表示、非表示を切り替えることによって、利用制限を設けます。
3)	物件管理機能（物件・系統登録・修正、物件検索、物件複写）
見積親情報となる、物件管理機能を作成します。管理項目に関して、要件定義フェーズにて協議することと致します。
［物件管理機能の主な機能］
✓	物件新規登録
物件情報を新規に入力します。見積作成単位である、"系統"も登録します。調整費、エンジニアリング費算出用距離ランクも登録します。
距離ランク別掛け率をマスタ化し、初期設定後、手動で変更も可能とします。
・ 至近・近距離地区
・ 遠距離地区
・ 遠々距離地区
✓	見積追加見積作成操作に遷移します。
また、見積作成時入力Excelファイルをでサーバに登録（アップロード、ダウンロード）できる仕組みも作成します。
✓	見積番号自動採番
採番ルールを取り決め、見積番号を自動採番致します。ダイキン工業様、販社様単位で採番とします。ユーザー
✓	特記事項、除外事項見積書に記載する、特記事項、除外事項を登録します。文面パターン化（マスタ化）したデータを選択後、手修正できる操作とします。
✓	見積担当変更見積担当変更、以下手順で操作とします。
ダイキン工業担当者様操作で、物件に対し、公開可設定、公開先を指定する。ユーザー指定された公開先担当者様が該当物件を開き、物件複写後に複写物件に対し、
見積操作を行う。
✓	系統間見積複写、以下手順で操作とします。
 
※ 部品に紐づく工事費も合わせて複写します。（コピー元情報マージ前金額複写となります）
※ 工事費単独で複写も可能とします。（機器名、部品に該当する階層要件定義時に精査します）
✓	物件内容更新作成済み物件情報を変更保存します。
✓	物件削除作成済み物件情報を削除します。削除論理削除とし、特定権限ユーザみ参照を可能とします。
✓	物件複写作成済み物件情報を別物件として複写します。複写元物件に作成されている見積情報も合わせて複写します。
✓	物件検索操作対象物件を検索します。検索条件入力、結果一覧を表示し、各種操作に遷移します。
4)	自動制御装置機器選定現在入力で利用しているExcelと同等入力機能をブラウザ画面として作成致します。
 
 
	
			⑨ ⑨ ⑨
				原価合計	標価合計	取付人工計
①②③	④
機器名称 	 機器型式	⑤ ⑤ ⑥⑦⑧③
原価単位 	 標準単価 	 歩掛   数量   単位   メーカー	⑧
購入先		1,898,400	5,933,800	16.72
				⑨   ⑨   ⑨
原価小計 	 標価小計 	 取付人工
	□	 	熱源バタフライ弁 100A	700G-41-100	40,300	286,100	0.88	4	台 ▼			▼	161,200	1,144,400	3.52
	☑	 	熱源バタフライ弁 200A	700G-41-200	76,900	559,600	0.88	4	台 ▼			▼	307,600	2,238,400	3.52
	□	 	配管用温度センサ	EK-A-010K	14,400	72,000	0.88	9	台 ▼			▼	129,600	648,000	7.92
	□	 	電磁流量計 150A	EGMA4100C-150A	500,000	713,000	0.88	1	台 ▼			▼	500,000	713,000	0.88
	□	 	電磁流量計 200A	EGMA4100C-200A	800,000	1,190,000	0.88	1	台 ▼			▼	800,000	1,190,000	0.88
	□	 							▼			▼	0	0	0.00
		
実際画面操作、機器名と機器名配下部品両単位で操作を可能にします。
①	機器名を複数件登録。
②	機器名に対し、部品を追加。（上記画面イメージ）
③	画面内で機器名単位で複写、貼り付け、部品単位で複写、貼り付け操作に対応。
※ 上記機能を1画面内で操作するか、機器名と部品操作を別画面とするか要件定義時に精査致します。
上記画面操作イメージ以下通りです。
①	複数行操作時操作対象行選択。
②	型式検索画面を利用して機器選択。検索画面を子ウインドウとして表示します。検索条件5種類程度項目とし、部分一致検索を想定しております。
③	型式をキーにデータベース検索し、自動補完。
④	手入力、先頭文字入力によるオートコンプリート入力。
⑤	所属別価格マスタを参照し金額自動計算。自動計算後、手修正可。
⑥	所属別歩掛マスタを参照し自動記入。手修正可。
⑦	手入力。
⑧	手入力。入力方法選択方式。 ⑨ 画面内各種数値を利用し、自動計算。上記に加え、行入れ替え操作も可とします。
画面内容で現在利用しております書式Excelファイルを作成します。
上記操作にて、自動制御機器明細を作成後に登録、見積明細画面に合計価格を反映します。再度、本画面に遷移した場合、終保存状態で初期表示します。
※ 一覧項目現行積算システム項目を参考にしております。実際項目別途精査致します。
5)	監視装置選定	※ お見積りから除外頂いても問題ありません。
Excelを利用して入力とします。
入力フォーム現在利用中Bips-D、ｉＴＭ2Excelファイルをそまま利用します。新積算システム入力インターフェースとして利用する為、
2Excelファイルに対し、以下対応を行います。
✓	新システム取り込み用Cファイル作成
✓	価格マスタ参照方法を直接データベースサーバを参照するように変更
（Excelファイル内に価格マスタを取り込んでしまっている為）
※ 現状Excelファイルに修正を加えることが可能なことが前提となります。
（BAソースファイルがパスワード保護されていないかご確認願います）
※ ブラウザ画面で編集した結果からExcelファイル復元行いません。
※ 入力フォーム一新する予定としております。新フォームご提供願います。
6)	制御盤・リモート盤選定	※ お見積りから除外頂いても問題ありません。
Excelを利用して入力とします。入力フォーム現在利用中Excelファイルを流用します。新積算システム入力インターフェースとして利用する為、
また、操作性改善を狙い、以下対応を行います。
✓	現在、ブック分けされており、ブック間でコピー＆ペーストが必要となっている操作を一連作業で操作できるように操作インターフェースを追加
（各ブックシートを1ブックに集約し、ボタン等操作で自動転記、計算結果出力を行えるようにする）
✓	マスタ参照している箇所直接データベースサーバを参照するように変更
✓	ソフトウェア費入力を行い、見積明細に反映できるようにする
・ 還気温度制御
・ 還気湿度制御
・ 給気側静圧によるスクロールダンパ制御
・ インターロック制御
✓	新システム取り込み用Cファイル作成
※ 現状Excelファイルに修正を加えることが可能なことが前提となります。
（BAソースファイルがパスワード保護されていないかご確認願います） ※ ブラウザ画面で編集した結果からExcelファイル復元行いません。
7)	工事費入力自動制御装置機器選定と同様操作イメージ（ブラウザ上で表入力）でブラウザ画面を作成します。
 
①	複数行操作時操作対象行選択。
②	品番検索画面を利用して部材選択。検索画面を子ウインドウとして表示します。検索条件5種類程度項目とし、部分一致検索を想定しております。
③	手入力、先頭文字入力によるオートコンプリート入力。
④	品番をキーにデータベース検索し、自動補完。
⑤	所属別歩掛マスタを参照し自動記入。手修正可。
⑥	手入力。
⑦	画面内各種数値を利用し、自動計算。
※ 工事費表示列に実際に必要な工事費種類分作成します。
⑧	別システム（Filder、P's）から出力した部材リスト（C形式）を画面上に読み込みます。別システム品番をマッチングテーブルを利用し、
新積算システム用品番に変換し、歩掛値を取得し画面に表示します。
これまでに入力した機器から算出された工事費を初期表示します。画面内容で現在利用しております書式Excelファイルを作成します。
上記操作にて、工事費明細を作成後に登録、見積明細画面に合計価格を反映します。再度、本画面に遷移した場合、終保存状態で初期表示します。
※ 一覧項目暫定です。実際項目別途精査致します。
※ 工事費に関して、同一品目をマージして1行（数量、金額合算）にする機能を作成します。合算前、計算元機器と紐づけをもち、
機器削除と合わせ削除します。合算後、こ紐づきが削除されますで、機器と同期行いません。また、合算前状態に戻す（機器構成から再計算）行わないこととします。
8)	見積明細作成
各種入力（自動制御装置機器選定、監視装置選定、制御盤・リモート盤選定、工事費入力）へ遷移と合計金額を表示します。本画面で、
見積明細内容変更（行入れ替え、削除）行わないこととします。
✓	各種入力値を利用し、以下金額も計算し、表示します。
・ 調整費
・ エンジニアリング費
・ 諸経費
・ 法定福利費上記各種費用各種入力（自動制御装置機器選定、監視装置選定、制御盤・リモート盤選定、工事費入力）結果、調整費、
エンジニアリング費に関して、物件管理機能で入力した距離ランク別係数を利用して四則演算で計算できることを前提としております。
計算結果手修正できることとします。
✓	制御盤・リモート盤選定複数面見積に対応する為、制御盤・リモート盤選定面数入力を行えるようにします。
本画面で終調整を行った結果を利用し、見積書を作成します。また、原価管理表も本画面から出力を可能とします。
9)	見積書作成見積明細作成で終調整した明細で見積書を作成します。
見積書1書式とします。
※ 見積書明細、入力された構成をそままExcelフォームに記入することとします。
✓	作成者欄、ログインユーザ情報から所属情報を検索し、動的に変更します。
✓	中央監視装置に関して、以下操作で対応頂くこととし、システム側で制御行いません。
①	ダイキン工業様ユーザー
・ 中央監視装置を系統として追加
・ 追加した系統に対し、制御盤・リモート盤選定Excelを利用し構成を追加する。
・ そ他不要な構成、明細を追加しない。
②	ダイキン工業様を除く企業様（販社）ユーザー
・ 物件に応じた系統に中央監視装置構成を追加する。構成制御盤・リモート盤選定Excelを利用する。
✓ 出力ファイルExcel形式とします。作成見積書Excelサーバ上に保管することとします。
作成した見積書Excelファイルを操作PCにダウンロードして利用頂く想定としております。
10)	原価管理表作成原価管理表作成をExcel形式で作成します。
✓	原価管理表作成に必要な情報、前述した入力情報、計算結果およびマスタ化された係数を利用して生成できることを前提とします。
✓	出力ファイルExcel形式とします。作成原価管理表Excelサーバ上に保管することとします。
作成した原価管理表Excelファイルを操作PCにダウンロードして利用頂く想定としております。
11)	発注書用CSV出力
アトラス連携用にCファイルを出力します。
Cに出力する情報、前述した入力情報、計算結果およびマスタ化された係数を利用して生成できることを前提とします。
3-1-2 .システム運用業務（管理者） 機能フロー
※ 管理者権限専用操作となります。見積に関わる単価、係数（歩掛）メンテナンス、所属会社用データみ更新可能とします。
 
1)	ユーザ管理機能以下ユーザ管理機能を作成します。
✓	ユーザ情報個別編集
・ ユーザ新規登録
・ ユーザ検索（検索条件入力、検索結果一覧表示）
・ ユーザ情報変更
・ ユーザ情報削除（論理削除）
✓	ユーザ一括編集機能
・ ユーザ情報一括ダウンロード（Excel形式）
・ ユーザ情報一括アップロード（Excel形式）
2)	マスタメンテナンス機能以下方法でマスタメンテナンス機能を作成します。
✓	入力Excelファイルで行い、画面を経由して、入力ファイルをアップロード後、データベースに反映します。
マスタごとにマスタレイアウトに応じたExcelシートを作成します。
マスタ改定時、同レイアウトでExcelファイルをダウンロードし、Excelファイル更新後、上記操作を行って頂きます。
✓	ダウンロード時、ログインユーザ所属会社用データみExcel化します。
※ 操作イメージを「3-1-3.サーバ環境管理機能」 2)マスタ管理に記載しておりますで合わせてご確認下さい。
 3-1-3 .サーバ環境管理機能前述とおり、本番運用用、テスト環境用にサーバを用意致しますで、以下環境同期ツールを作成します。
1)	プログラムモジュール管理
✓ 本番運用環境、テスト環境ともに、手動で差分ファイルを追加、更新します。当社より、
以下手順書を提示致しますで、御社にてご対応頂く想定としております。（当社からリモート接続できる環境をご用意いただける場合、当社にて対応可能です）
①	差分ファイル一覧、および配置フォルダ
②	システムへ反映方法（EB/APサーバ再起動方法など） ※ ②について手順をマニュアル化します。
2)	マスタ管理マスタテスト環境、本番環境反映マスタメンテナンス画面を利用して操作します。
[ マスタメンテナンス画面 ]
 
※ テスト環境、本番環境ともに同じ機能を操作可能にします。反映が必要な環境へLに接続し、操作頂く想定としております。
 
※ 何れ画面も他社様で事例となります。御社向けに開発が必要となります。
※ マスタメンテナンス機能で利用するExcelバージョン2010みとして下さい。
3-1-4 .排他制御について
排他制御楽観的排他制御とします。
更新また削除処理時に他ユーザーによって変更されていないかどうかをチェックして、変更されている場合に、エラーダイアログを表示して、
更新また削除処理をキャンセルするように致します。
[ 処理内容 ]
1)	画面表示
・ バージョンを取得する画面表示時に、各画面で使用するテーブルに「バージョン」フィールドがある場合、「バージョン」値を取得画面で保持する。
※ 各テーブル取得処理で同時に取得で可。
2)	INSERT処理
・ バージョンを新規登録する新規登録するテーブルに「バージョン」フィールドがある場合、「1」を初期値としてINEする。
3)	UPDATE処理
・ バージョンを比較する更新するテーブルに「バージョン」フィールドがある場合、
画面で保持していた「バージョン」値と更新する条件データ「バージョン」値を比較する。
①	バージョン値が同じ場合
PDAE処理を行う。
バージョン値、インクリメントする。(「取得した値に＋１update」もしく「シーケンスで採番」)
②	バージョン値が異なる場合
更新エラーとし、更新できないメッセージを画面に表示する。
( ロールバック )
4) DELETE処理
・ バージョンを比較する削除するテーブルに「バージョン」フィールドがある場合、
画面で保持していた「バージョン」値と削除する条件データ「バージョン」値を比較する。
①	バージョン値が同じ場合
DELEE処理を行う。
②	バージョン値が異なる場合
削除エラーとし、削除できないメッセージを画面に表示する。
( ロールバック )
※ PDEAE処理、DELEE処理でバージョンを比較する箇所について基本的に、各テーブル更新また削除前に行う。
ただし、複数テーブル、複数処理関数にまたがる場合、「synchronized」を使用して排他制御すること。
( 明示的にロールバックやコミットも行うこと )
( デッドロックに注意 )
４.各フェーズでの対応について
4-1 .要求定義以下結果を資料化することとします。
①	開発機能一覧開発対象機能を一覧化します。
②	画面デザイン／機能概要画面項目、デザイン、基本的な操作および画面で必要な処理内容を取り纏め資料化します。
③	各種見積ルール各種見積ルールを取り纏め資料化します。
④	出力帳票、C一覧出力帳票種類、C種類を一覧化します。
⑤	帳票デザイン／出力概要帳票項目、デザインを取り纏め資料化します。
⑥	画面遷移各画面間遷移を取り纏め資料化します。
⑦	サーバ構成データ容量等を試算し、終的なサーバ構成を定義します。
⑧	性能要件画面、帳票出力単位で、保証データ件数、保証応答時間を定義します。
⑨	プロジェクト計画体制図、開発スケジュール、リスク要因・対策を定義します。本プロジェクトに関連する、
会社様をすべて含むステークホルダーを作成します。
4-2 .基本設計・詳細設計
当社で、以下設計書作成を社内標準としております。以下設計書作成でご了承願います。
①	機能一覧、帳票・C一覧作成機能、帳票、C、処理一覧
②	画面遷移図画面遷移を示した資料
③	画面設計書画面に対する、概要、項目仕様、操作仕様、画面で処理仕様、データベースアクセス仕様
④	帳票、C仕様書帳票に対する、概要、項目仕様、項目生成ルール、データベースアクセス仕様
⑤	処理仕様書画面、帳票、Cに依存しない処理が発生した場合、処理仕様を取りまとめた資料
⑥	データベース設計書
E図および項目定義書
⑦	システム構成定義書終確定したサーバ要件、利用ソフト一覧、クライアント要件
⑧	他システム連携仕様他システムと連携仕様を取りまとめた資料。
※ 記述規模によって、画面設計書に記載する可能性があります。
⑨	システム概要システム目的、利用ユーザ、そ他各設計書に記載できない、システム全体に対する仕様を取りまとめた資料
⑩	アーキテクチャ、ソフトウェア構造システム構造、実装方法、特殊な方式によって実装している部分方式説明
※ 一般的なシステム開発に関わる部分取り纏め行いません。
4-7 .レビュー
各種設計書に関して原則すべて設計書に対しレビューを行います。レビュー結果に対する議事録作成行いません。
レビュー結果を直接設計書に反映し納品致します。
開催履歴として、以下一覧を納品致します。
対象設計書、実施日、参加者、修正内容確認者、確認日
ソースコードに関して、以下単位で実施致します。
①	１担当者につき1回あくまでプログラムとして質、妥当性を個人単位にチェックするが目的となります。
②	主要画面本紙機能フロー記載単位で、主だった処理部分みレビューします。性能に関わる問題がないかなど、
こちらもプラグラム妥当性を目的とします。
開催履歴として、以下一覧を納品致します。
対象機能、実施日、参加者
※ 仕様妥当性に関して設計書レビューで確認できると判断しております。
4-8 .操作性等の確認操作性、設計書記述と合わせ、モックを作成し確認頂く想定としております。 
 
6-1 .全体内訳フェーズ1
NO	作業項目名				備　考
1	要件定義				
2	基本設計・詳細設計				
3	環境構築				
4	システム開発(フェーズ1)				
フェーズ2
NO	作業項目名				備　考
1	システム開発(フェーズ2)				
2	試験（試験仕様書作成含む）				
3	マニュアル				
4	システム構築手順書				
 
6-2 .開発内訳フェーズ1
NO	開発項目			備　考
通常 業務（一般ユーザ）
1	共通処理、フレームワーク整備			
2	ログイン			
	2-1 .画面開発			
	2-2 .データベース突合せ			
	2-3 .LDAP認証			
	2-4 .ログイン情報取得・保有			
3	メニュー			
	3-1 .画面開発			
	3-2 .権限、部門別表示制 御			
4	物件管理機能				
	4-1.画面開発	新規登録			
	4-2.系統登録	新規登録			
	4-3.距離ランク登録・編集	新規登録			
	4-4.見積追加	新規登録			
	4-5.見積番号自動採番	新規登録			
	4-6.特記事項、除外事項	新規登録			
	4-7 .見積担当変更				
	4-8 .系統間見積複写				
	4-9 .物件内容更新				
	4-10 .物件削除				
	4-11 .物件複写				
	4-12.物件検索				現行9項目検索項目みを想定
5	自動制御装置機器選定				
	5-1 .メイン画面開発				
	5-2 .グリッド制御				
	5-3 .機器名設定				
	5-4 .型式検索サブ画面				
	5-5 .Excelファイル作成				
6	監視装置選定				
	6-1 .Bips-D DB接続対応			
	6-2 .Bips-D C出力対応			
	6-3 .iM DB接続対応			
	6-4 .iM C出力対応			
7	制御盤・リモート盤選定			
	7-1 .ブックマクロ統合			
	7-2 .DB接続変更			
	7-3 .C出力対応			
	7-4 .ソフトウェア費入力			
8	工事費入力			
	8-1 .メイン画面開発			
	8-2 .工事費初期表示			
	8-3 .グリッド制御			
	8-4 .品番検索サブ画面			
	8-5 .Filder C連携（品番変換含む）			
	8-6 .P's C連携（品番変換含む）			
	8-7 .工事費合算			
	8-8 .Excelファイル作成			
9	見積明細作成			
	9-1 .メイン画面開発			
	9-2 .監視装置Cインポート			
	9-3 .制御盤・リモート盤Cインポート			
	9-4 .調整費計算・編集			
	9-5 .エンジニアリング費計算・編集			
	9-6 .諸経費計算・編集			
	9-7 .法定福利費計算・編集			
	9-8 .制御盤・リモート盤選定面数入力			
10	見積書作成			
	10-1 .帳票Excel化			
	10-2 .出力データ作成			
	10-3 .担当者別提出元情報内容変更			
 

